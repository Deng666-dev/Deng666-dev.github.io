body {
    /* 方案A: 纯色护眼模式（推荐，更有极客感） */
    background-color: #f4f4f0; 
    
    /* 方案B: 如果你一定要图片，把图片放在 source/images/bg.jpg */
    /* background-image: url('../images/bg.jpg'); */
    /* background-repeat: repeat; */
    /* background-attachment: fixed; */
}

/* 让文章容器稍微白一点，形成层次感 */
.post-content, #content {
    background: rgba(255, 255, 255, 0.6); /* 半透明白色 */
    padding: 20px;
    border-radius: 8px;
}

@import "_variables"
@import "_colors/" + $colors
@import "_util"
@import "_mixins"
@import "_extend"
@import "_fonts"

global-reset()

*, *:before, *:after
  box-sizing: border-box

/* Scroll bar */
/* For Firefox */
*
  scrollbar-color: $color-scrollbar transparent

/* For Chrome, Edge, and Safari */
*::-webkit-scrollbar
  width: 8px
  height: 6px

*::-webkit-scrollbar-track
  background: transparent

*::-webkit-scrollbar-thumb
  background-color: $color-scrollbar
  border-radius: 6px

*::-webkit-scrollbar-thumb:hover
  background-color: darken($color-scrollbar, 20%)

*::-webkit-scrollbar-thumb:active
  background-color: darken($color-scrollbar, 30%)

html
  margin: 0
  padding: 0
  height: 100%
  border-top: 2px solid $color-text
  -webkit-text-size-adjust: 100%
  -ms-text-size-adjust: 100%

body
  margin: 0
  height: 100%
  background-color: $color-background
  color: $color-text
  font-weight: 400
  font-size: $font-size
  font-family: $font-family-body
  line-height: $line-height
  text-rendering: geometricPrecision

  antialias()

  @extend $base-style

.content
  position: relative
  display: flex
  flex-direction: column
  min-height: 100%
  overflow-wrap: break-word

  p
    hyphens(auto)

  code
    hyphens(manual)

  a
    color: $color-text
    text-decoration: none

    underline(5px, $color-text)

    &:hover
      background-image: linear-gradient(transparent, transparent 4px, $color-link 4px, $color-link)

  a.icon
    background: none

    &:hover
      color: $color-link

  h1 a, .h1 a, h2 a, h3 a, h4 a, h5 a, h6 a
    background: none
    color: inherit
    text-decoration: none

  h1 a:hover, .h1 a:hover, h2 a:hover, h3 a:hover, h4 a:hover, h5 a:hover, h6 a:hover
    underline(6px, $color-link)

  h6
    a
      background: none
      color: inherit
      text-decoration: none

  h6
    a:hover
      underline(6px, $color-link)

@media (min-width: 540px)
  .image-wrap
    flex-direction: row
    margin-bottom: 2rem

    .image-block
      flex: 1 0 35%
      margin-right: 2rem

    p
      flex: 1 0 65%

.max-width
  max-width: $page-width

@media (max-width: 480px)
  // smaller margins at smaller screen widths
  .px3
    padding-right: 1rem
    padding-left: 1rem

  .my4
    margin-top: 2rem
    margin-bottom: 2rem

@media (min-width: 480px)
  p
    text-align: justify

@import "_partial/header"
@import "_partial/post/actions_desktop"
@import "_partial/post/actions_mobile"
@import "_partial/index"
@import "_partial/article"
@import "_partial/archive"
@import "_partial/comments"
@import "_partial/footer"
@import "_partial/pagination"
@import "_partial/search"
@import "_partial/tags"
@import "_partial/tooltip"
@import "_partial/categories"
// Code
@import "_highlight/" + $highlight

pre
  overflow-x: auto
  padding: 10px 15px
  padding-bottom: 0
  border: 1px dotted $color-border
  border-radius: 4px
  font-size: 13px
  font-family: $font-family-mono
  line-height: 22px
  -webkit-border-radius: 4px

  code
    display: block
    padding: 0
    border: none

code
  padding: 0 5px
  border: 1px dotted $color-border
  border-radius: 2px
  -webkit-border-radius: 2px

.highlight
  overflow-x: auto
  margin: 1rem 0
  padding: 10px 15px
  border-radius: 4px
  background: $color-background-code
  font-family: $font-family-mono
  // color: $color-accent-3
  -webkit-border-radius: 4px

  figcaption
    margin: -5px 0 5px
    color: $color-meta-code
    font-size: .9em
    transform: scale(1)

    a
      float: right
      color: $color-meta-code
      font-style: italic
      font-size: .8em

      underline(10px, $color-link)

    a:hover
      color: lighten($color-meta-code, 20%)

    &:before, content: ""
      display: table

    &:after
      clear: both

  &:hover 
    .btn-copy
      opacity: 1

  .btn-copy
    font-size: 1.2rem
    position: absolute
    right: 20px
    opacity: 0
    transition: opacity 0.2s ease-in
    &:hover
      color: $color-accent-1

  pre
    margin: 0
    padding: 0
    border: none
    background: none

  table
    width: auto

  td.gutter
    text-align: right
    opacity: .2

  .line
    height: 22px

#header-post #actions
  direction: ltr !important


/* ==========================================================================
   哈吉米终极版 V4.0 - 目录彻底修复
   (绝对禁止 0.1 出现，绝对清除多余 # 号，强制左对齐)
   ========================================================================== */

/* 1. 核弹级重置：清除主题自带的所有干扰样式 */
#toc ol, #toc li, #toc .toc-link, #toc .toc-text, 
#toc .toc-child, #toc .toc-item {
    list-style: none !important;
    padding: 0 !important;
    margin: 0 !important;
    border: none !important;
    background: none !important;
}

/* 重要：清除主题可能在 li 或 link 上添加的伪元素 # 号 */
#toc li:before, #toc li:after,
#toc .toc-link:before, #toc .toc-link:after {
    content: none !important;
    display: none !important;
}

/* 2. 容器定位 */
#toc {
    text-align: left !important; /* 强制左对齐 */
    font-size: 0.9rem;
    line-height: 1.8;
    padding-left: 10px !important; /* 稍微离左边一点距离 */
}

/* 3. 计数器核心逻辑 (修复 0.1 的关键) */
/* 只有最外层的 ol 负责创建主计数器 */
#toc > ol {
    counter-reset: section-counter; 
}

/* 这里的每一个 li 都是一个主章节 */
#toc > ol > li.toc-item {
    margin-top: 12px !important; /* 大章节之间拉开距离 */
}

/* --- 二级标题 (H2) --- */
/* 选中二级标题的链接部分 */
#toc > ol > li > .toc-link {
    font-weight: bold; /* 二级标题加粗 */
    color: #222 !important;
}
/* 在二级标题前加序号 */
#toc > ol > li > .toc-link:prepend {
    /* 占位，实际由下面实现 */
}
#toc > ol > li > .toc-link > .toc-text::before {
    counter-increment: section-counter;
    content: counter(section-counter) ". "; /* 显示 "1. " */
    color: #2bbc8a;
    margin-right: 5px;
    font-family: monospace; /* 用等宽字体保证对齐 */
}

/* --- 三级标题 (H3) --- */
/* 三级标题的容器 ol，重置子计数器 */
#toc .toc-child {
    padding-left: 20px !important; /* 缩进 */
    counter-reset: subsection-counter;
    margin-top: 5px !important;
}

/* 选中三级标题的链接 */
#toc .toc-child .toc-link {
    font-size: 0.85rem; /* 字体小一点 */
    color: #666 !important;
    font-weight: normal;
}

/* 在三级标题前加序号 */
#toc .toc-child .toc-link > .toc-text::before {
    counter-increment: subsection-counter;
    /* 显示 "1.1 "，利用父级的计数器和自己的计数器拼接 */
    content: counter(section-counter) "." counter(subsection-counter) " "; 
    color: #999;
    margin-right: 5px;
    font-family: monospace;
}

/* 4. 链接样式与悬停交互 (防闪烁) */
#toc .toc-link {
    display: block !important; /* 让链接占满一行 */
    text-decoration: none;
    
    /* 单行文本截断 */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 220px; /* 限制宽度，根据需要微调 */
    
    padding: 2px 5px;
    border-radius: 4px;
    transition: all 0.2s ease;
    position: relative; /* 为悬停做准备 */
}

/* 鼠标悬停效果 */
#toc .toc-link:hover {
    color: #2bbc8a !important;
    background: #f0fdf8; /* 浅绿色背景 */
    
    /* 悬停展示完整内容 */
    overflow: visible;
    white-space: normal;
    width: auto; /* 宽度自动撑开 */
    z-index: 100;
    box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
}